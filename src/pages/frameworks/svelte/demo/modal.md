---
layout: ../../../../layouts/Markdown.astro
title: Modal.svelte
---

```svelte
<!-- Set script language to typescript -->
<script lang="ts">
    // Export the show variable as a prop
    export let show: boolean = false;

    // Variable for the dialog
    let dialog: HTMLDialogElement;

    // Reactive statement whenever dialog or show changes value
    // Check if the dialog has been set - since it might not have on initial page load
    $: if (dialog) {
        // If show is true, open the dialog
        if (show) {
            dialog.showModal();

        // Else close it
        } else {
            dialog.close();
        }
    }
</script>

<!-- Set show to false whenever the dialog is clicked, or escape is pressed.
Clicking the dialog works since the dialog backdrop generated by opening the modal counts as clicking the dialog itself -->
<svelte:window on:keydown={(e) => e.key === "Escape" && show && (show = false)}
on:click={(e) => show && e.target === dialog && (show = false)}
/>

<!-- Bind the dialog element to the dialog variable -->
<dialog bind:this={dialog}>
    <!-- Slot for header -->
    <slot name="header"/>
    <!-- Horizontal Divider -->
    <hr />
    <!-- Default slot for content -->
    <slot/>
</dialog>

<!-- Styling is done with SCSS instead of vanilla CSS to allow better nesting -->
<style lang="scss">
    dialog {
        /* Fixed position at center screen */
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);

        /* Grey border with 5px corner radius */
        border: 1px solid #ccc;
        border-radius: 5px;

        color: white;
        padding: 1rem;

        /* Semi transparent black background */
        background-color: #0005;

        /* Ensure dialog is above all other elements */
        z-index: 1000;

        /* Ensure dialog cannot be narrower than 45% of screen width */
        min-width: 45vw;

        /* Stack items vertically with a gap of current font height */
        flex-direction: column;
        gap: 1em;

        /* Style if the dialog is open */
        &[open] {
            display: flex;
        }
    }

    /* Style for the dialog backdrop. This slightly darkens and blurs the other page content */
    dialog::backdrop {
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(5px);
    }

    /* Remove the margin for the horizontal divider */
    hr {
        margin: 0;
    }
</style>
```
